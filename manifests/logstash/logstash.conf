input {
  http {
    id => "testing"
    port => 5045
  }
  beats {
    port => 5044
  }
}

filter {
  grok {
    match => { "message" => "%{IPV4:serverIP} %{TIMESTAMP_ISO8601:timestamp} %{LOGLEVEL:level} %{GREEDYDATA:className}:%{POSINT:lineNumber} - %{GREEDYDATA:messageDetail}" }
  }
  ip2location {
    source => "host"
    use_memory_mapped => true
  }
  geoip {
    source => "host"
  }
}

output {
  elasticsearch {
    hosts => ["172.19.0.1:9200"]
    index => "testingindex"
  }
  stdout {
    codec => rubydebug
  }
}
